# 测试报告

## 变更日志

| 修改人员 | 日期     | 修改原因               | 版本号 |
| -------- | -------- | ---------------------- | ------ |
| 陈亦骁   | 2022.7.5 | 创建了测试报告         | v1.0   |
| 陈亦骁   | 2022.7.6 | 完善了Dao层测试        | v1.1   |
| 陈亦骁   | 2022.7.7 | 完善了Service层测试    | v1.2   |
| 陈亦骁   | 2022.7.8 | 完善了初步系统并发测试 | v1.3   |

## 测试背景

编写此报告的目的在于清楚地阐述ERP系统中与测试相关的所有内容。

### 目的

为了更好地辅助开发、保证产品的正确性安全性、提高用户信赖程度而进行明确的、有目的的、有效率的测试。

### 参考文献

[1] 《软件开发的技术基础》丁二玉、刘钦编著；

## 测试平台

后端本地测试平台为：JDK1.8、JUnit、MySQL数据库（单元测试、集成测试）。

## 后端测试内容

### Dao层测试内容

DAO（Data Access Object）层主要进行的是单元测试。

- 测试形式主要进行黑盒测试（包括边界值测试、随机测试）
- 测试的主要目的：检验DAO层代码能够完成数据存取的功能

#### AccountDao测试

| 测试名称      | 测试内容                                   | 预期结果                                                     | 测试结果 |
| ------------- | ------------------------------------------ | ------------------------------------------------------------ | -------- |
| add           | 新增一项账户                               | 最新的账户就是新增的账户                                     | 通过     |
| delete        | 新增账户后删除                             | 新增的账户不是最新的账户                                     | 通过     |
| update        | 新增一项账户，按账户名查询该账户并对其修改 | 最新的账户是更新后的账户                                     | 通过     |
| findAll       | 查询所有账户                               | 账户大小符合预期                                             | 通过     |
| findByKeyword | 按关键词查询账户                           | 关键词为“5005”，结果包含“201250056，201250057，20125005，15005” | 通过     |

**测试结果截图**

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/accountDao.png)



#### AttendanceDao测试

| 测试名称   | 测试内容                   | 预期结果                                 | 测试结果 |
| ---------- | -------------------------- | ---------------------------------------- | -------- |
| insert     | 新增一次打卡，当日打卡记录 | 当日打卡记录为1                          | 通过     |
| countMonth | 当月打卡次数               | 昨天已打卡，次数为1，今天再打卡，次数为2 | 通过     |

**测试结果截图**

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/attendDao.png)



#### BonusDao测试

| 测试名称 | 测试内容           | 预期结果      | 测试结果 |
| -------- | ------------------ | ------------- | -------- |
| create   | 新建年终奖         | 新建成功      | 通过     |
| getAll   | 获取所有年终奖列表 | 列表大小大于0 | 通过     |

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/bonusDao.png)



#### OpeningDao测试

| 测试名称 | 测试内容                 | 预期结果     | 测试结果 |
| -------- | ------------------------ | ------------ | -------- |
| create   | 新建商品                 | 每次新建成功 | 通过     |
| findAll  | 获取所有初期建账商品列表 | 列表大小为2  | 通过     |

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/openingDao.png)



#### PersonnelDao测试

| 测试名称   | 测试内容       | 预期结果     | 测试结果 |
| ---------- | -------------- | ------------ | -------- |
| findByName | 按员工姓名查找 | 查找正确     | 通过     |
| findAll    | 获取所有员工   | 列表大小为12 | 通过     |

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/personnelDao.png)



#### PromotionStrategyByPricePacksDao测试

| 测试名称 | 测试内容     | 预期结果                     | 测试结果 |
| -------- | ------------ | ---------------------------- | -------- |
| save     | 保存一条策略 | 查找最新的策略为刚保存的策略 | 通过     |
| findAll  | 获取所有策略 | 列表不为空                   | 通过     |

![PromotionStrategyByPricePacksDao](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/PromotionStrategyByPricePacksDao.png)



#### ReceiptSheetDao测试

| 测试名称    | 测试内容           | 预期结果                          | 测试结果 |
| ----------- | ------------------ | --------------------------------- | -------- |
| create      | 建立收款单         | 建立成功                          | 通过     |
| saveContent | 存储收款单转账列表 | 存储成功                          | 通过     |
| findByState | 按审批状态查找     | 获得的列表大小为2，且状态符合预计 | 通过     |
| update      | 更新状态           | 更新前后状态符合预计              | 通过     |

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/receiptDao.png)



### Service层测试内容

Service层主要进行的是集成测试。

- 测试形式主要进行黑盒测试（包括边界值测试、随机测试）。

- 测试的主要目的：对给定输入进行正确的后端处理，并且能够返回符合预期的输出。

#### GiftService测试

| 测试名称            | 测试内容       | 预期结果                 | 测试结果 |
| ------------------- | -------------- | ------------------------ | -------- |
| makeGiftSheet       | 建立赠送单     | 建立成功                 | 通过     |
| getGiftSheetByState | 按审批状态查找 | 获得的列表和状态符合预计 | 通过     |
| approval            | 审批           | 审批后状态符合预计       | 通过     |

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/giftService.png)

#### PaymentService测试

| 测试名称         | 测试内容   | 预期结果                                           | 测试结果 |
| ---------------- | ---------- | -------------------------------------------------- | -------- |
| makePaymentSheet | 建立付款单 | 建立成功                                           | 通过     |
| approval_1       | 审批       | 审批成功后修改客户应收金额，审批成功后修改账户余额 | 通过     |

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/paymentService.png)



#### PersonnelService测试

| 测试名称        | 测试内容 | 预期结果 | 测试结果 |
| --------------- | -------- | -------- | -------- |
| createPersonnel | 新增员工 | 建立成功 | 通过     |

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/personnelService.png)



#### PromotionService测试

| 测试名称                           | 测试内容                     | 预期结果     | 测试结果 |
| ---------------------------------- | ---------------------------- | ------------ | -------- |
| makeStrategyByUserLevel            | 新增用户级别促销策略         | 建立成功     | 通过     |
| makeStrategyByUserLevel_2          | 新增用户级别促销策略2        | 建立成功     | 通过     |
| updateSaleSheet_1                  | 更新销售单代金券、总价等内容 | 更新成功     | 通过     |
| updateSaleSheet_2                  | 更新销售单代金券、总价等内容 | 更新成功     | 通过     |
| updateSaleSheet_3                  | 更新销售单代金券、总价等内容 | 更新成功     | 通过     |
| makeStrategyByTotalPrice           | 新增总价包促销策略           | 建立成功     | 通过     |
| makeStrategyByPack                 | 新增商品组合促销策略         | 建立成功     | 通过     |
| getAllPromotionStrategyByUserLevel | 获得所有用户级别促销策略     | 列表大小为15 | 通过     |

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/promotionService.png)

#### ReceiptService测试

| 测试名称         | 测试内容   | 预期结果                                           | 测试结果 |
| ---------------- | ---------- | -------------------------------------------------- | -------- |
| makeReceiptSheet | 建立收款单 | 建立成功                                           | 通过     |
| approval_1       | 审批       | 审批成功后修改客户应付金额，审批成功后修改账户余额 | 通过     |

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/ReceiptService.png)

#### SheetsReviewService测试

| 测试名称                   | 测试内容             | 预期结果                       | 测试结果 |
| -------------------------- | -------------------- | ------------------------------ | -------- |
| getSaleDetailByTime_1      | 有记录的情况         | 查询大小符合要求               | 通过     |
| getSaleDetailByTime_2      | 结束时间大于开始时间 | 抛出异常                       | 通过     |
| getSaleDetailByProduct_1   | 有记录的情况         | 查询大小符合要求               | 通过     |
| getSaleDetailByCustomer_1  | 有记录的情况         | 查询大小符合要求               | 通过     |
| getSaleDetailByOperator_1  | 有记录的情况         | 查询大小符合要求               | 通过     |
| getSaleDetailByWarehouse_1 | 有记录的情况         | 查询大小符合要求               | 通过     |
| getOperationSheet_1        | 查询经营情况表       | 各结果正确                     | 通过     |
| getSheetByTime_1           | 按时间查找           | 查询大小符合要求               | 通过     |
| getSheetBySheetType_1      | 按种类查找           | 查询大小符合要求               | 通过     |
| redFlush_1                 | 红冲                 | 红冲生成的单据和之前的正好抵消 | 通过     |
| getSheetByCustomerName_1   | 按客户查找           | 查询大小符合要求               | 通过     |
| getSheetByOperatorName_1   | 按操作员查找         | 查询大小符合要求               | 通过     |

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/SheetsReviewService.png)

### 后端测试结果与结论

- 所有代码均已根据测试结果进行调试、修改和优化。



## 初步系统并发测试

### 测试内容

apifox，设置4个接口，循环10次，40个线程进行并发测试

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/%E6%B5%8B%E8%AF%95%E5%86%85%E5%AE%B9.png)

### 测试结果

![](%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/%E5%B9%B6%E8%A1%8C%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C.png)

### 结论

在并发性能上表现较好，已达到erp系统初期的访问负载量目标。